# üöÄ –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø SUPABASE –î–õ–Ø VERCEL

## üî¥ –ü–†–û–ë–õ–ï–ú–ê

–Ø–∫—â–æ –≤–∏ –±–∞—á–∏—Ç–µ –ø–æ–º–∏–ª–∫—É –ø—Ä–∏ –¥–µ–ø–ª–æ—ó –Ω–∞ Vercel:

```
üîß –°–∏—Å—Ç–µ–º–∞ –ø–æ—Ç—Ä–µ–±—É—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.
–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –º–∞—î:
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ supabase.com
2. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
3. –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—ñ –ë–î

Detal—ñ: Supabase configuration required.
Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.
```

–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ Supabase –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è production.

## üìã –®–í–ò–î–ö–ï –†–Ü–®–ï–ù–ù–Ø

### –ö–†–û–ö 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ Supabase –ø—Ä–æ–µ–∫—Ç

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ: **https://supabase.com**
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **"Start your project"** –∞–±–æ **Sign In**
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **"New project"**
4. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É:
   - **Project name**: `mikola-medical-clinic` (–∞–±–æ –±—É–¥—å-—è–∫–∞ –Ω–∞–∑–≤–∞)
   - **Database Password**: –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–¥—ñ–π–Ω–∏–π –ø–∞—Ä–æ–ª—å
   - **Region**: `eu-central-1` (–¥–ª—è –Ñ–≤—Ä–æ–ø–∏) –∞–±–æ –Ω–∞–π–±–ª–∏–∂—á–∞ –¥–æ –≤–∞—Å
   - **Plan**: **Free** (–≤—ñ–ª—å–Ω–∏–π –ø–ª–∞–Ω) ‚úÖ
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **Create new project**
6. **–ß–µ–∫–∞–π—Ç–µ 2-3 —Ö–≤–∏–ª–∏–Ω–∏** –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —ñ–Ω—ñ—Ç—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –ö–†–û–ö 2: –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∫–ª—é—á—ñ –¥–æ—Å—Ç—É–ø—É

1. –£ Supabase Dashboard –ø–µ—Ä–µ–π–¥—ñ—Ç—å: **Settings** (‚öôÔ∏è) ‚Üí **API**
2. –í–∏ –ø–æ–±–∞—á–∏—Ç–µ:
   ```
   Project URL:           https://xxxxx.supabase.co
   anon (public) key:     eyJ0eXAiOiJKV1QiL...
   ```
3. **–°–∫–æ–ø—ñ—é–π—Ç–µ —ñ –∑–±–µ—Ä–µ–∂—ñ—Ç—å –æ–±–∏–¥–≤–∞ –∑–Ω–∞—á–µ–Ω–Ω—è**

### –ö–†–û–ö 3: –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Vercel

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: **https://vercel.com/dashboard**
2. –í–∏–±–µ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç: **mikola-nov-capi-1708**
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **Settings** (—É –≤–µ—Ä—Ö–Ω—ñ–π –ø–∞–Ω–µ–ª—ñ)
4. –£ –ª—ñ–≤—ñ–π –ø–∞–Ω–µ–ª—ñ –≤–∏–±–µ—Ä—ñ—Ç—å: **Environment Variables**
5. –î–æ–¥–∞–π—Ç–µ –ø–µ—Ä–µ–≤—É—é –∑–º—ñ–Ω–Ω—É:

   ```
   Name:  NEXT_PUBLIC_SUPABASE_URL
   Value: https://xxxxx.supabase.co
   ```

   –í–∏–±–µ—Ä—ñ—Ç—å: ‚úÖ **Production** ‚úÖ **Preview**
   –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **Add**

6. –î–æ–¥–∞–π—Ç–µ –¥—Ä—É–≥—É –∑–º—ñ–Ω–Ω—É:

   ```
   Name:  NEXT_PUBLIC_SUPABASE_ANON_KEY
   Value: eyJ0eXAiOiJKV1QiL...
   ```

   –í–∏–±–µ—Ä—ñ—Ç—å: ‚úÖ **Production** ‚úÖ **Preview**
   –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **Add**

7. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: **Deployments** ‚Üí –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–π deployment ‚Üí **Redeploy**

### –ö–†–û–ö 4: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—ñ –ë–î

1. –£ Supabase Dashboard –ø–µ—Ä–µ–π–¥—ñ—Ç—å: **SQL Editor** (—É –ª—ñ–≤—ñ–π –ø–∞–Ω–µ–ª—ñ)
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **New Query**

### –ö–†–û–ö 4: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—ñ –ë–î

1. –£ Supabase Dashboard –ø–µ—Ä–µ–π–¥—ñ—Ç—å: **SQL Editor** (—É –ª—ñ–≤—ñ–π –ø–∞–Ω–µ–ª—ñ)
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **New Query**
3. **–°–∫–æ–ø—ñ—é–π—Ç–µ —ñ –≤—Å—Ç–∞–≤—Ç–µ —Ü–µ–π SQL –∫–æ–¥:**

```sql
-- üìã –¢–ê–ë–õ–ò–¶–Ø: medical_forms (–ú–µ–¥–∏—á–Ω—ñ —Ñ–æ—Ä–º–∏)
CREATE TABLE IF NOT EXISTS medical_forms (
  id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  name TEXT NOT NULL,
  age TEXT,
  gender TEXT,
  phone TEXT NOT NULL,
  height DECIMAL(5,2),
  weight DECIMAL(5,2),
  bmi DECIMAL(4,1),
  complaints TEXT,
  examinations TEXT[] DEFAULT '{}',
  has_chronic_disease BOOLEAN DEFAULT false,
  chronic_diseases TEXT,
  takes_medication BOOLEAN DEFAULT false,
  medications TEXT,
  pain_level INTEGER DEFAULT 0,
  additional_comments TEXT,
  user_agent TEXT,
  is_mobile BOOLEAN DEFAULT false,
  viewport TEXT,
  connection TEXT,
  platform TEXT,
  cookie_enabled BOOLEAN DEFAULT false,
  status TEXT DEFAULT 'pending',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- üìû –¢–ê–ë–õ–ò–¶–Ø: consultations (–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó)
CREATE TABLE IF NOT EXISTS consultations (
  id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  name TEXT NOT NULL,
  phone TEXT NOT NULL,
  comment TEXT,
  date TEXT,
  user_agent TEXT,
  is_mobile BOOLEAN DEFAULT false,
  viewport TEXT,
  platform TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- üîç –Ü–ù–î–ï–ö–°–ò –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
CREATE INDEX idx_medical_forms_created_at ON medical_forms(created_at DESC);
CREATE INDEX idx_consultations_created_at ON consultations(created_at DESC);
CREATE INDEX idx_medical_forms_status ON medical_forms(status);

-- üîê –î–û–ó–í–û–õ–ò –¥–æ—Å—Ç—É–ø—É (RLS)
ALTER TABLE medical_forms ENABLE ROW LEVEL SECURITY;
ALTER TABLE consultations ENABLE ROW LEVEL SECURITY;

-- –ü–æ–ª—ñ—Ç–∏–∫–∏ –¥–ª—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É
CREATE POLICY "Allow all operations" ON medical_forms FOR ALL USING (true);
CREATE POLICY "Allow all operations" ON consultations FOR ALL USING (true);
```

4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **‚ñ∂Ô∏è RUN** (–∑–µ–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∞)
5. –í–∏ –ø–æ–±–∞—á–∏—Ç–µ: ‚úÖ **Query succeeded** (–Ω–∞ 5-6 —Ä—è–¥–∫—ñ–≤ SQL)

### –ö–†–û–ö 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ Vercel Deployment

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: **https://vercel.com/dashboard**
2. –í–∏–±–µ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç: **mikola-nov-capi-1708**
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **Deployments**
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–π deployment (–≤—ñ–Ω –º–∞–≤ –±—É—Ç–∏ —á–µ—Ä–≤–æ–Ω–∏–º ‚ùå)
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å: **Redeploy** (–∫–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∞)
6. –ß–µ–∫–∞–π—Ç–µ ~2-3 —Ö–≤–∏–ª–∏–Ω–∏ –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è

## ‚úÖ –ü–ï–†–ï–í–Ü–†–ö–ê –†–û–ë–û–¢–ò

### –õ–æ–∫–∞–ª—å–Ω–æ

```bash
# –î–æ–¥–∞–π—Ç–µ –≤ .env.local:
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ0eXAiOiJKV1Q...

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä
npm run dev
```

### –ù–∞ Vercel

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∞—à —Å–∞–π—Ç: `https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app`
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: `/medical-form`
3. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å: **–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏**
4. –í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –æ—Ç—Ä–∏–º–∞—Ç–∏: ‚úÖ **–§–æ—Ä–º—É —É—Å–ø—ñ—à–Ω–æ –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ!**
5. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤ Supabase:
   - –ü–µ—Ä–µ–π–¥—ñ—Ç—å: **Table Editor** ‚Üí **medical_forms**
   - –í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±–∞—á–∏—Ç–∏ –≤–∞—à—É –∑–∞–ø–∏—Å!

## üêõ –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê –ü–û–ú–ò–õ–û–ö

### –ü–æ–º–∏–ª–∫–∞: "Invalid API key"

```
‚ùå –ö–ª—é—á –Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–Ω–∏–π
```

**–†—ñ—à–µ–Ω–Ω—è:**

- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤–∏ —Å–∫–æ–ø—ñ—é–≤–∞–ª–∏ **anon key**, –∞ –Ω–µ **service_role key**
- –ê–Ω–æ–Ω –∫–ª—é—á –º–∞—î –ø–æ—á–∏–Ω–∞—Ç–∏—Å—è: `eyJ0eXAiOiJKV1QiL...`

### –ü–æ–º–∏–ª–∫–∞: "Connection failed"

```
‚ùå Cannot connect to database
```

**–†—ñ—à–µ–Ω–Ω—è:**

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π: `https://xxxxx.supabase.co`
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤–∏–π (—á–µ–∫–∞–π—Ç–µ –Ω–∞ Supabase —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∑–º—ñ–Ω–Ω—ñ –¥–æ–±–∞–≤–ª–µ–Ω—ñ –≤ **Production** —ñ **Preview**

### –î–∞–Ω—ñ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è

```
‚ùå –§–æ—Ä–º–∞ –Ω–∞–¥—ñ—Å–ª–∞–Ω–∞, –∞–ª–µ –Ω–µ–º–∞—î –¥–∞–Ω–∏—Ö –≤ Supabase
```

**–†—ñ—à–µ–Ω–Ω—è:**

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ç–∞–±–ª–∏—Ü—ñ —ñ—Å–Ω—É—é—Ç—å: Supabase ‚Üí **Table Editor**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: Vercel ‚Üí **Deployments** ‚Üí **Logs** ‚Üí –ø–æ—à—É–∫–∞–π—Ç–µ –ø–æ–º–∏–ª–∫–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏: –≤–æ–Ω–∏ –º–∞—é—Ç—å –¥–æ–∑–≤–æ–ª—è—Ç–∏ INSERT
- –°–ø—Ä–æ–±—É–π—Ç–µ –≤—ñ–¥–∫–ª—é—á–∏—Ç–∏ RLS —Ç–∏–º—á–∞—Å–æ–≤–æ:
  ```sql
  ALTER TABLE medical_forms DISABLE ROW LEVEL SECURITY;
  ALTER TABLE consultations DISABLE ROW LEVEL SECURITY;
  ```

### –Ø–∫ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ –≤ Vercel

1. Vercel Dashboard ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. **Deployments** ‚Üí –≤–∏–±—Ä–∞—Ç–∏ deployment (–∑ –¥–µ—Ñ–µ–∫—Ç–æ–º)
3. **Logs** ‚Üí –ø–æ—à—É–∫–∞–π—Ç–µ –ø–æ–º–∏–ª–∫–∏ –≤ –ª–æ–≥–∞—Ö

## üìû –î–û–ü–û–ú–Ü–ñ–ù–Ü –ö–û–ú–ê–ù–î–ò

### –ù–∞ –ª–æ–∫–∞–ª—å–Ω—ñ–π –º–∞—à–∏–Ω—ñ:

```bash
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Supabase (—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ)
node supabase-setup.js

# –ü–æ–∫–∞–∑–∞—Ç–∏ SQL –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å
cat supabase-schema.sql

# –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ API
bash test-api.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ development —Å–µ—Ä–≤–µ—Ä
npm run dev
```

---

**–î–∞—Ç–∞**: 27 –≥—Ä—É–¥–Ω—è 2025  
**–í–µ—Ä—Å—ñ—è**: 2.1  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–û–¢–û–í–û
-- –í–∏–¥–∞–ª—ñ—Ç—å –ø—É–±–ª—ñ—á–Ω—ñ –ø–æ–ª—ñ—Ç–∏–∫–∏
DROP POLICY "Enable all operations for all users" ON medical_forms;
DROP POLICY "Enable all operations for all users" ON consultations;

-- –°—Ç–≤–æ—Ä—ñ—Ç—å –±—ñ–ª—å—à –æ–±–º–µ–∂–µ–Ω—ñ –ø–æ–ª—ñ—Ç–∏–∫–∏
CREATE POLICY "Allow insert for everyone" ON medical_forms FOR INSERT WITH CHECK (true);
CREATE POLICY "Allow select for authenticated users" ON medical_forms FOR SELECT USING (auth.role() = 'authenticated');

CREATE POLICY "Allow insert for everyone" ON consultations FOR INSERT WITH CHECK (true);
CREATE POLICY "Allow select for authenticated users" ON consultations FOR SELECT USING (auth.role() = 'authenticated');

```

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

- Supabase Dashboard ‚Üí "Logs" –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –∑–∞–ø–∏—Ç—ñ–≤
- Vercel Dashboard ‚Üí "Functions" –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ª–æ–≥—ñ–≤ API
- Console –≤ –±—Ä–∞—É–∑–µ—Ä—ñ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏—Ö –ø–æ–º–∏–ª–æ–∫

---

**–í–∞–∂–ª–∏–≤–æ**: –ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Supabase —Ñ–æ—Ä–º–∏ –±—É–¥—É—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —ñ –∑ –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤, —ñ –∑ –¥–µ—Å–∫—Ç–æ–ø—É –±–µ–∑ –ø–æ–º–∏–ª–æ–∫ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏.
```
